# é”¦æ ‡èµ›å®æ—¶æ’åç»Ÿè®¡

## ğŸ“Š åŠŸèƒ½æ¦‚è¿°

å®æ—¶è¿½è¸ªé”¦æ ‡èµ›ä¸­çš„ç©å®¶æ’åã€ç­¹ç å˜åŒ–å’Œå…³é”®äº‹ä»¶ã€‚

---

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. å®æ—¶æ’è¡Œæ¦œ
- **æ’åå˜åŒ–æŒ‡ç¤º** - æ˜¾ç¤ºä¸ä¸Šä¸€æ‰‹ç‰Œç›¸æ¯”çš„æ’åå˜åŒ–ï¼ˆä¸Šå‡/ä¸‹é™ï¼‰
- **ç­¹ç è¶‹åŠ¿** - æ˜¾ç¤ºç›¸å¯¹äºèµ·å§‹ç­¹ç çš„ç›ˆäºç™¾åˆ†æ¯”
- **çŠ¶æ€æ ‡è¯†** - å®æ—¶æ˜¾ç¤ºç©å®¶çŠ¶æ€ï¼ˆæ´»è·ƒ/All-in/å·²æ·˜æ±°ï¼‰
- **å‰ä¸‰åç‰¹æ®Šæ ‡è¯†** - é‡‘/é“¶/é“œå¥–ç‰Œæ ·å¼

### 2. ä¸‰ç§æ’åºæ–¹å¼
- **æŒ‰ç­¹ç æ’åº** - é»˜è®¤ï¼Œå®æ—¶ç­¹ç é‡æ’å
- **æŒ‰æ’åæ’åº** - æœ€ç»ˆæ’åï¼ˆè€ƒè™‘æ·˜æ±°é¡ºåºï¼‰
- **æŒ‰æ·˜æ±°é¡ºåº** - æŸ¥çœ‹æ·˜æ±°æ—¶é—´çº¿

### 3. é”¦æ ‡èµ›è¿›åº¦è¿½è¸ª
- **è¿›åº¦æ¡** - å¯è§†åŒ–æ˜¾ç¤ºæ¯”èµ›è¿›åº¦
- **æ³¡æ²«æŒ‡ç¤º** - æ ‡è®°å¥–é‡‘åœˆè¾¹ç•Œä½ç½®
- **å‰©ä½™äººæ•°** - å®æ—¶æ˜¾ç¤ºå­˜æ´»ç©å®¶æ•°é‡
- **å¥–æ± é‡‘é¢** - æ˜¾ç¤ºæ€»å¥–æ± 

### 4. ç»Ÿè®¡æ•°æ®
- **å¹³å‡ç­¹ç ** - è®¡ç®—å­˜æ´»ç©å®¶çš„å¹³å‡ç­¹ç 
- **æœ€å¤§/æœ€å°ç­¹ç ** - ç­¹ç åˆ†å¸ƒ extremes
- **æ’åå˜åŠ¨** - æ˜¾ç¤ºæœ€è¿‘å˜åŒ–æœ€å¤§çš„ç©å®¶

### 5. å…³é”®æ—¶åˆ»è®°å½•
- **è¿›å…¥å†³èµ›æ¡Œ** - 9äººå‰©ä½™æ—¶è§¦å‘
- **è¿›å…¥å•æŒ‘** - 2äººå‰©ä½™æ—¶è§¦å‘
- **æ³¡æ²«ç ´è£‚** - å¥–é‡‘åœˆå½¢æˆæ—¶è§¦å‘
- **å† å†›äº§ç”Ÿ** - æ¯”èµ›ç»“æŸæ—¶è§¦å‘

### 6. æ·˜æ±°å†å²
- **æ·˜æ±°é¡ºåº** - å®Œæ•´è®°å½•æ·˜æ±°æ—¶é—´çº¿
- **æ·˜æ±°æ—¶ç­¹ç ** - è®°å½•æ·˜æ±°æ—¶çš„å‰©ä½™ç­¹ç 
- **å­˜æ´»ç©å®¶** - å®æ—¶æ›´æ–°å­˜æ´»åå•

---

## ğŸ“± ç•Œé¢ç»„ä»¶

### TournamentLeaderboardView
ä¸»è¦æ’è¡Œæ¦œè§†å›¾ï¼ŒåŒ…å«ï¼š
- æ’ååˆ—è¡¨ï¼ˆå®æ—¶æ›´æ–°ï¼‰
- ç­¹ç ç»Ÿè®¡æ‘˜è¦
- æ’åºé€‰é¡¹
- æ·˜æ±°/å­˜æ´»ç­›é€‰

### TournamentProgressView
è¿›åº¦è¿½è¸ªè§†å›¾ï¼ŒåŒ…å«ï¼š
- å¯è§†åŒ–è¿›åº¦æ¡
- æ³¡æ²«æŒ‡ç¤ºå™¨
- å‰©ä½™äººæ•°ç»Ÿè®¡
- å¥–æ± ä¿¡æ¯

### TournamentLeaderboardOverlay
å…¨å±è¦†ç›–å±‚ï¼ŒåŒ…å«ä¸‰ä¸ªæ ‡ç­¾é¡µï¼š
1. **æ’è¡Œæ¦œ** - å®æ—¶æ’ååˆ—è¡¨
2. **è¿›åº¦** - å…³é”®æ—¶åˆ»ã€æ’åå˜åŠ¨ã€ç­¹ç åˆ†å¸ƒ
3. **å†å²** - æ·˜æ±°è®°å½•ã€æ’åå†å²

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### åœ¨æ¸¸æˆç•Œé¢ä¸­æ˜¾ç¤º
æ’è¡Œæ¦œæŒ‰é’®å·²é›†æˆåˆ° GameTopBarï¼š
- ä»…åœ¨é”¦æ ‡èµ›æ¨¡å¼æ˜¾ç¤º
- ç‚¹å‡»åå¼¹å‡º TournamentLeaderboardOverlay

### æ•°æ®æ›´æ–°
æ¯æ‰‹ç‰Œç»“æŸæ—¶è‡ªåŠ¨æ›´æ–°ï¼š
```swift
.onChangeCompat(of: store.engine.isHandOver) { isOver in
    if isOver {
        if store.engine.gameMode == .tournament {
            TournamentStatsManager.shared.updateAfterHand(
                handNumber: store.engine.handNumber,
                players: store.engine.players,
                engine: store.engine
            )
        }
    }
}
```

### è·å–ç»Ÿè®¡æ•°æ®
```swift
// è·å–å½“å‰æ’å
let rankings = TournamentStatsManager.shared.currentRankings

// è·å–æ’åå˜åŠ¨
let change = TournamentStatsManager.shared.rankChange(for: playerId, overHands: 5)

// è·å–ç­¹ç è¶‹åŠ¿
let trend = TournamentStatsManager.shared.chipTrendData(for: playerId)

// è·å–é”¦æ ‡èµ›æ‘˜è¦
let summary = TournamentStatsManager.shared.tournamentSummary()
```

---

## ğŸ“ æ–°å¢æ–‡ä»¶

```
TexasPoker/
â”œâ”€â”€ UI/Views/
â”‚   â”œâ”€â”€ TournamentLeaderboardView.swift       # ä¸»æ’è¡Œæ¦œè§†å›¾
â”‚   â”œâ”€â”€ TournamentLeaderboardOverlay.swift    # å…¨å±è¦†ç›–å±‚
â”‚   â””â”€â”€ GameSubviews/GameTopBar.swift         # æ›´æ–°ï¼šæ·»åŠ æ’è¡Œæ¦œæŒ‰é’®
â”œâ”€â”€ Core/Data/
â”‚   â””â”€â”€ TournamentStatsManager.swift          # ç»Ÿè®¡ç®¡ç†å™¨
â””â”€â”€ TOURNAMENT_LEADERBOARD.md                 # æœ¬æ–‡æ¡£
```

---

## ğŸ® ä¸‹ä¸€æ­¥é›†æˆ

1. **å›¾è¡¨å¯è§†åŒ–** - åœ¨"å†å²"æ ‡ç­¾é¡µæ·»åŠ æ’åå˜åŒ–æŠ˜çº¿å›¾
2. **å¯¼å‡ºåŠŸèƒ½** - å¯¼å‡ºé”¦æ ‡èµ›æŠ¥å‘Š
3. **åˆ†äº«åŠŸèƒ½** - åˆ†äº«æ’åæˆªå›¾
4. **è¯¦ç»†ç»Ÿè®¡** - æ·»åŠ  VPIPã€PFR ç­‰è¯¦ç»†æ•°æ®åˆ°æ’è¡Œæ¦œ

---

## ğŸ“Š æ•°æ®ç»“æ„

### PlayerRanking
```swift
struct PlayerRanking {
    let playerId: UUID
    let name: String
    let avatar: String
    let chips: Int
    let rank: Int
    let change: Int      // æ’åå˜åŒ–ï¼ˆæ­£æ•°=ä¸Šå‡ï¼‰
    let isHero: Bool
    let isEliminated: Bool
    let eliminationHand: Int?
}
```

### TournamentMoment
```swift
struct TournamentMoment {
    enum MomentType {
        case doubleUp
        case badBeat
        case bubbleBurst
        case finalTable
        case headsUp
        case champion
    }
    
    let type: MomentType
    let handNumber: Int
    let description: String
    let playerName: String
    let chips: Int?
}
```